{% extends 'base.html' %}

{% block title %} 
    Suivi de l'épidémie COVID-19 en France : Synthèse des données collectées auprès du milieu hospitalier
{% endblock %}

{% block content %} 
<div id="data">
    <h2>
        {% if (label != 'France'): %}
            <a href="/#">France</a> &gt; 
        {% endif %} 
        {% if (label != 'France'): %}
            {% if (label['type'] == 'department'): %}
                {{ label['prefix'] }} : {{ label['name'] }} (FR-{{ department }})
            {% else : %}
                {{ label['prefix'] }} : {{ label['name'] }} (FR-{{ region }})
            {% endif %}
        {% else : %}
            {{ label }}
        {% endif %} 
    </h2>
    <div class="row">
        <div class="col-md-12">     
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3>Chiffres clés du {{ last_day_fr }} au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3>Chiffres clés du {{ last_day_fr }} à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3>Chiffres clés du {{ last_day_fr }} en {{ label }}</h3> 
                    {% endif %}
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card mb-4 box-shadow">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button onclick="window.location.href='#patients_décédés_quotidiennement';" class="button death">
                                                <span class="key-value">{{ covid_counters['last_dc'] }}</span>
                                                {% if (covid_counters['diff_dc'] < 0): %}
                                                    <br /> <font size="2">({{ covid_counters['diff_dc'] }})</font>
                                                {% else: %}
                                                    <br /> <font size="2">(+{{ covid_counters['diff_dc'] }})</font>
                                                {% endif %}
                                                {% if (covid_counters['last_dc']>1): %}
                                                    <br /> nouveaux décès
                                                {% else: %}
                                                    <br /> nouveau décès
                                                {% endif %}
                                            </button>
                                            <button onclick="window.location.href='#total_patients_décédés';" class="button death">
                                                <span class="key-value" style="font-size:21px">{{ covid_counters['all_dc'] }}</span>
                                                {% if (covid_counters['all_dc']>1): %}
                                                    <br /> décès au total
                                                {% else: %}
                                                    <br /> décès au total
                                                {% endif %}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4 box-shadow">
                                <div class="row">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">
                                        <button onclick="window.location.href='#cas_positifs';" class="button positive">
                                            <span class="key-value">{{ positive_counters['current_positive'] }}</span>
                                            {% if (positive_counters['diff_positive'] < 0): %}
                                                <br /> <font size="2">({{ positive_counters['diff_positive'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ positive_counters['diff_positive'] }})</font>
                                            {% endif %}
                                            {% if (positive_counters['current_positive']>1): %}
                                                <br /> cas positifs <font size="2">au {{ positive_counters['positive_last_day_fr'] }}</font>
                                            {% else: %}
                                                <br /> cas positif
                                            {% endif %}
                                        </button>
                                    </div>
                                    <div class="col-md-3"></div>
                                </div>       
                                <div class="card-body">  
                                    <div class=conteneur>
                                        <img usemap="#etats" src="{{ url_for('static', filename='images/transition.png') }}" alt="">
                                    </div>                              
                                    <map name="etats">
                                        <area href="#patients_en_réanimation" shape="rect" coords="28,30 121,69">
                                        <area href="#patients_en_hospitalisation" shape="rect" coords="165,30 259,69">
                                        <area href="#cas_positifs" shape="rect" coords="96,87 190,124">
                                        <area href="#patients_décédés_quotidiennement" shape="rect" coords="28,142 121,180">
                                        <area href="#patients_guéris_quotidiennement" shape="rect" coords="165,142 259,180">
                                    </map>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <button onclick="window.location.href='#patients_en_réanimation';" class="button resuscitation">
                                            <span class="key-value">{{ covid_counters['current_rea'] }}</span>
                                            {% if (covid_counters['diff_rea'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['diff_rea'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['diff_rea'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['current_rea']>1): %}
                                                <br /> réanimations
                                            {% else: %}
                                                <br /> réanimation
                                            {% endif %}
                                        </button>
                                    </div>
                                    <div class="col-md-6">
                                        <button onclick="window.location.href='#patients_en_hospitalisation';" class="button hospitalized">
                                            <span class="key-value">{{ covid_counters['current_hosp'] }}</span>
                                            {% if (covid_counters['diff_hosp'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['diff_hosp'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['diff_hosp'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['current_hosp']>1): %}
                                                <br /> hospitalisations
                                            {% else: %}
                                                <br /> hospitalisation
                                            {% endif %}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card mb-4 box-shadow">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <button onclick="window.location.href='#patients_guéris_quotidiennement';" class="button healed">
                                                <span class="key-value">{{ covid_counters['last_rad'] }}</span>
                                                {% if (covid_counters['diff_rad'] < 0): %}
                                                    <br /> <font size="2">({{ covid_counters['diff_rad'] }})</font>
                                                {% else: %}
                                                    <br /> <font size="2">(+{{ covid_counters['diff_rad'] }})</font>
                                                {% endif %}
                                                {% if (covid_counters['last_rad']>1): %}
                                                    <br /> nouvelles guérisons
                                                {% else: %}
                                                    <br /> nouvelle guérison
                                                {% endif %}
                                            </button>
                                            <button onclick="window.location.href='#total_patients_guéris';" class="button healed">
                                                <span class="key-value" style="font-size:21px">{{ covid_counters['all_rad'] }}</span>
                                                {% if (covid_counters['all_rad']>1): %}
                                                    <br /> guérisons au total
                                                {% else: %}
                                                    <br /> guérison au total
                                                {% endif %}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>  
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">     
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3>Taux clés du {{ last_day_fr }} pour 100 000 habitants au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3>Taux clés du {{ last_day_fr }} pour 100 000 habitants à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3>Taux clés du {{ last_day_fr }} pour 100 000 habitants en {{ label }}</h3> 
                    {% endif %}
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card mb-4 box-shadow imagebackground">
                                <div class="row">
                                    <div class="col-md-3">
                                        <button onclick="window.location.href='#map_view';" class="button death">
                                            <span class="key-value">{{ covid_counters['rates']['dc'] }}</span>
                                            {% if (covid_counters['rates']['d_dc'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['rates']['d_dc'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['rates']['d_dc'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['rates']['dc']>1): %}
                                                <br /> total décès
                                            {% else: %}
                                                <br /> total décès
                                            {% endif %}
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button onclick="window.location.href='#map_view';" class="button resuscitation">
                                            <span class="key-value">{{ covid_counters['rates']['rea'] }}</span>
                                            {% if (covid_counters['rates']['d_rea'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['rates']['d_rea'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['rates']['d_rea'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['rates']['rea']>1): %}
                                                <br /> réanimations
                                            {% else: %}
                                                <br /> réanimation
                                            {% endif %}
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button onclick="window.location.href='#map_view';" class="button hospitalized">
                                            <span class="key-value">{{ covid_counters['rates']['hosp'] }}</span>
                                            {% if (covid_counters['rates']['d_hosp'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['rates']['d_hosp'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['rates']['d_hosp'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['rates']['hosp']>1): %}
                                                <br /> hospitalisations
                                            {% else: %}
                                                <br /> hospitalisation
                                            {% endif %}
                                        </button>
                                    </div>
                                    <div class="col-md-3">
                                        <button onclick="window.location.href='#map_view';" class="button healed">
                                            <span class="key-value">{{ covid_counters['rates']['rad'] }}</span>
                                            {% if (covid_counters['rates']['d_rad'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['rates']['d_rad'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['rates']['d_rad'] }})</font>
                                            {% endif %}
                                            {% if (covid_counters['rates']['rad']>1): %}
                                                <br /> total guérisons
                                            {% else: %}
                                                <br /> total guérison
                                            {% endif %}
                                        </button>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2">
                                    </div>
                                    <div class="col-md-4">
                                        <button onclick="window.location.href='#map_view';" class="button">
                                            <span class="key-value">{{ covid_counters['rates']['r_dc_rad'] }}%</span>
                                            {% if (covid_counters['rates']['d_r_dc_rad'] < 0): %}
                                                <br /> <font size="2">({{ covid_counters['rates']['d_r_dc_rad'] }}%)</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ covid_counters['rates']['d_r_dc_rad'] }}%)</font>
                                            {% endif %}
                                                <br /> décès/guérisons
                                        </button>
                                    </div>
                                    <div class="col-md-4">
                                        <button onclick="window.location.href='#map_view';" class="button positive">
                                            <span class="key-value">{{ positive_counters['rates']['positive'] }}</span>
                                            {% if (positive_counters['rates']['d_positive'] < 0): %}
                                                <br /> <font size="2">({{ positive_counters['rates']['d_positive'] }})</font>
                                            {% else: %}
                                                <br /> <font size="2">(+{{ positive_counters['rates']['d_positive'] }})</font>
                                            {% endif %}
                                                <br /> cas positifs <font size="2">au {{ positive_counters['positive_last_day_fr'] }}</font>
                                        </button>
                                    </div>
                                    <div class="col-md-2">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" id="map_view">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    <h3>Sélection d'un critère à visualiser</h3>
                    <div class="bootstrap-iso">
                        <form method="POST" action="{{ url_for('maps') }}">
                            <div class="form-row align-items-center">
                                <div class="col-auto my-1">
                                    <select name="map_select" class="custom-select mr-sm-2">
                                        {% for m in map_choice %}
                                            {% if (m == map_select): %}
                                            <option selected="selected">{{ map_select }}</option> 
                                            {% else %}
                                                <option value="{{ m }}">{{ m }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                  <button type="submit" formaction="{{ url_for('maps') }}#map_view" class="btn btn-primary">Valider</button>
                                </div>
                            </div>
                        </form> 
                    </div>
                </div>
                <div class="row">
                    {% if (map_select == "Nombre de décès"): %}
                    <div class="col-md-6" id="death_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur une région pour afficher le détail">
                                        <h3>Nombre de décès à l'hôpital par région *</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_dc'] }} décès *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="death_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de décès à l'hôpital par département *</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_dc'] }} décès *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% elif (map_select == "Taux décès / (décès + guérisons)"): %}
                    <div class="col-md-6" id="rate_death_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Taux décès / (décès + guérisons) par région</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Taux national : {{ covid_counters['nat_refs']['nat_r_dc_rad'] }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="rate_death_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Taux décès / (décès + guérisons) par département</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Taux national : {{ covid_counters['nat_refs']['nat_r_dc_rad'] }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% elif (map_select == "Nombre de guérisons"): %}
                    <div class="col-md-6" id="rad_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de guérisons à l'hôpital par région *</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:green">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_rad'] }} guérisons *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="rad_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de guérisons à l'hôpital par département *</h3>
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:green">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_rad'] }} guérisons *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% elif (map_select == "Nombre d'hospitalisations le " + last_day_fr): %}
                    <div class="col-md-6" id="hosp_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre d'hospitalisations par région le {{ last_day_fr }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_hosp'] }} hospitalisations *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="hosp_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre d'hospitalisations par département le {{ last_day_fr }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_hosp'] }} hospitalisations *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% elif (map_select == "Nombre de réanimations le " + last_day_fr): %}
                    <div class="col-md-6" id="rea_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de réanimations par région le {{ last_day_fr }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_rea'] }} réanimations *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="rea_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de réanimations par département le {{ last_day_fr }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ covid_counters['nat_refs']['nat_rea'] }} réanimations *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% elif (map_select == "Nombre de cas positifs le " + positive_counters['positive_last_day_fr']): %}
                    <div class="col-md-6" id="positive_map_reg">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de cas positifs par région le {{ positive_counters['positive_last_day_fr'] }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ positive_counters["nat_refs"]['nat_positive'] }} cas positifs *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6" id="positive_map_dep">
                        <div class="card mb-4 box-shadow">
                            <div class="card-body">
                                <div class="pictos">
                                    <a class="picto-item" aria-label="Cliquez sur un département pour afficher le détail">
                                        <h3>Nombre de cas positifs par département le {{ positive_counters['positive_last_day_fr'] }} *
                                    </a>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="map"></div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="card mb-4 box-shadow">
                                            <div class="card-body">
                                                <a class="picto-item" aria-label="Sélectionnez les couleurs que vous souhaitez afficher sur la carte">
                                                    <p>Légende</p>
                                                </a>
                                                <div class="areaLegend"></div>
                                                <p style="color:red">&#x26A0; Niveau national : {{ positive_counters["nat_refs"]['nat_positive'] }} cas positifs *</p>
                                                <p style="color:black"><small>(* : pour 100 000 habitants)</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    <h3 id="patients_quotidiennement">Nombre de cas sur 100 000 habitants par département au {{ last_day_fr }} (au  {{ positive_counters['positive_last_day_fr'] }} pour les cas positifs)</h3>
                    <div id="Dernier nombre de patients pour 100 000 habitants par département"></div>
                </div>
            </div>
        </div>
        <div class="col-md-12" id="top_dep_results">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    <h3>Départements les plus touchés au {{ last_day_fr }}</h3>
                    <div class="bootstrap-iso">
                        <form method="POST" action="{{ url_for('top_dep_settings') }}">
                            <div class="form-row align-items-center">
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">Nombre de dépt. à afficher</label>
                                    <select name="top_dep_settings" class="custom-select mr-sm-2">
                                        {% for t in number_all_dep %}
                                            {% if (t == top_dep): %}
                                                <option selected="selected">{{ top_dep }}</option> 
                                            {% else %}
                                                <option value="{{ t }}">{{ t }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">Critère à afficher</label>
                                    <select name="top_dep_settings" class="custom-select mr-sm-2">
                                        {% for c in criterion_choice %}
                                            {% if (c == criterion_select): %}
                                                <option selected="selected">{{ criterion_select }}</option> 
                                            {% else %}
                                                <option value="{{ c }}">{{ c }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1 align-self-end">
                                  <button type="submit" formaction="{{ url_for('top_dep_settings') }}#top_dep_results" class="btn btn-primary">Valider</button>
                                </div>
                            </div>
                        </form> 
                    </div>
                </div>
                {% if (criterion_select == "Cas positifs au "+positive_counters['positive_last_day_fr']): %}
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3 id="patients_quotidiennement">Top {{ top_dep }} des départements selon le nombre de cas positifs pour 100 000 habitants au {{ positive_counters['positive_last_day_fr'] }}</h3>
                            <div id="Top des départements selon le nombre de cas positifs pour 100 000 habitants"></div>
                        </div>
                    </div>
                </div>
                {% elif (criterion_select == "Hospitalisations au "+last_day_fr): %}
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3 id="patients_quotidiennement">Top {{ top_dep }} des départements selon le nombre d'hospitalisations pour 100 000 habitants au {{ last_day_fr }}</h3>
                            <div id="Top des départements selon le nombre d'hospitalisations pour 100 000 habitants"></div>
                        </div>
                    </div>
                </div>
                {% elif (criterion_select == "Réanimations au "+last_day_fr): %}
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3 id="patients_quotidiennement">Top {{ top_dep }} des départements selon le nombre de réanimations pour 100 000 habitants au {{ last_day_fr }}</h3>
                            <div id="Top des départements selon le nombre de réanimations pour 100 000 habitants"></div>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div> 
        <div class="col-md-12">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="cas_positifs">Nombre quotidien de personnes détectées positives au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="cas_positifs">Nombre quotidien de personnes détectées positives à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="cas_positifs">Nombre quotidien de personnes détectées positives en {{ label }}</h3> 
                    {% endif %}
                    <div id="Nombre de personnes actuellement positives"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="patients_en_hospitalisation">Nombre de patients actuellement hospitalisés au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="patients_en_hospitalisation">Nombre de patients actuellement hospitalisés à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3></h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="patients_en_hospitalisation">Nombre de patients actuellement hospitalisés en {{ label }}</h3>
                    {% endif %}
                    <div id="Nombre de personnes actuellement hospitalisées"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="patients_en_réanimation">Nombre de patients actuellement en réanimation au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="patients_en_réanimation">Nombre de patients actuellement en réanimation à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="patients_en_réanimation">Nombre de patients actuellement en réanimation en {{ label }}</h3>
                    {% endif %}
                    <div id="Nombre de personnes actuellement en réanimation"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="total_patients_décédés">Nombre cumulé de patients décédés à l'hôpital au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="total_patients_décédés">Nombre cumulé de patients décédés à l'hôpital à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="total_patients_décédés">Nombre cumulé de patients décédés à l'hôpital en {{ label }}</h3>
                    {% endif %}
                    <div id="Nombre cumulé de personnes décédées à l'hôpital"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="total_patients_guéris">Nombre cumulé de patients retournés à domicile au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="total_patients_guéris">Nombre cumulé de patients retournés à domicile à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="total_patients_guéris">Nombre cumulé de patients retournés à domicile en {{ label }}</h3>
                    {% endif %}
                    <div id="Nombre cumulé de personnes retournées à domicile"></div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="patients_décédés_quotidiennement">Nombre quotidien de patients décédés à l'hôpital au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="patients_décédés_quotidiennement">Nombre quotidien de patients décédés à l'hôpital à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="patients_décédés_quotidiennement">Nombre quotidien de patients décédés à l'hôpital en {{ label }}</h3> 
                    {% endif %}
                    <div id="Nombre quotidien de personnes décédées à l'hôpital"></div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    {% if (label != 'France'): %}
                        {% if (label['type'] == 'department'): %}
                            <h3 id="patients_guéris_quotidiennement">Nombre quotidien de patients retournés à domicile au {{ label['prefix'] }} {{ label['name'] }} (FR-{{ department }})</h3>
                        {% else : %}
                            <h3 id="patients_guéris_quotidiennement">Nombre quotidien de patients retournés à domicile à la {{ label['prefix'] }} {{ label['name'] }} (FR-{{ region }})</h3>
                        {% endif %}
                    {% else : %}
                        <h3 id="patients_guéris_quotidiennement">Nombre quotidien de patients retournés à domicile en {{ label }}</h3> 
                    {% endif %}
                    <div id="Nombre quotidien de personnes retournées à domicile"></div>
                </div>
            </div>
        </div>
        <div class="col-md-12" id="global_monitoring_results">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    <h3>Suivi global de la situation épidémique en France</h3>
                    <div class="bootstrap-iso">
                        <form method="POST" action="{{ url_for('global_monitoring_settings') }}">
                            <div class="form-row align-items-center">
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">pc number</label>
                                    <select name="global_parameters" class="custom-select mr-sm-2">
                                        {% for pc in global_pc %}
                                            {% if (pc == pcdim): %}
                                                <option selected="selected">{{ pcdim }}</option>
                                            {% else %}
                                                <option value="{{ pc }}">{{ pc }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">data normalization</label>
                                    <select name="global_parameters" class="custom-select mr-sm-2">
                                        {% for b in normalize_states %}
                                            {% if (b == normalize): %}
                                                <option selected="selected">{{ normalize }}</option> 
                                            {% else %}
                                                <option value="{{ b }}">{{ b }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                    <label class="control-label" for="date">date range (model learning)</label>
                                    <input type="text" class="form-control" data-filter-type="date-range" data-toggle="daterangepicker" name="global_parameters">
                                </div>
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">smoothing filter</label>
                                    <select name="global_parameters" class="custom-select mr-sm-2">
                                        {% for s in alpha_smooth %}
                                            {% if (s == alpha): %}
                                                <option selected="selected">{{ alpha }}</option> 
                                            {% else %}
                                                <option value="{{ s }}">{{ s }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1 align-self-end">
                                  <button type="submit" formaction="{{ url_for('global_monitoring_settings') }}#global_monitoring_results" class="btn btn-primary">Valider</button>
                                </div>
                            </div>
                        </form> 
                    </div>
                </div>
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3>Indicateur t</h3>
                            <div id="Hotelling"> </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3>Indicateur s</h3>
                            <div id="SPE"> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12" id="hosp_monitoring_results">
            <div class="card mb-4 box-shadow">
                <div class="card-body">
                    <h3>Suivi de la situation épidémique en France en surveillant le nombre d'hospitalisations</h3>
                    <div class="bootstrap-iso">
                        <form method="POST" action="{{ url_for('hosp_monitoring_settings') }}">
                            <div class="form-row align-items-center">
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">pc number</label>
                                    <select name="hosp_parameters" class="custom-select mr-sm-2">
                                        {% for pc in pc_reg %}
                                            {% if (pc == pcdim_reg): %}
                                                <option selected="selected">{{ pcdim_reg }}</option> 
                                            {% else %}
                                                <option value="{{ pc }}">{{ pc }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">data normalization</label>
                                    <select name="hosp_parameters" class="custom-select mr-sm-2">
                                        {% for b in normalize_states %}
                                            {% if (b == normalize_reg): %}
                                                <option selected="selected">{{ normalize_reg }}</option>
                                            {% else %}
                                                <option value="{{ b }}">{{ b }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1">
                                    <label class="control-label" for="date">date range (model learning)</label>
                                    <input type="text" class="form-control" data-filter-type="date-range" data-toggle="daterangepicker" name="hosp_parameters">
                                </div>
                                <div class="col-auto my-1">
                                    <label class="mr-sm-2" for="inlineFormCustomSelect">smoothing filter</label>
                                    <select name="hosp_parameters" class="custom-select mr-sm-2">
                                        {% for s in alpha_smooth %}
                                            {% if (s == alpha_reg): %}
                                                <option selected="selected">{{ alpha_reg }}</option> 
                                            {% else %}
                                                <option value="{{ s }}">{{ s }}</option>
                                            {% endif %}
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-auto my-1 align-self-end">
                                    <button type="submit" formaction="{{ url_for('hosp_monitoring_settings') }}#hosp_monitoring_results" class="btn btn-primary">Valider</button>
                                </div>
                            </div>
                        </form> 
                    </div>
                </div>
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3>Indicateur t</h3>
                            <div id="Hotelling_reg"> </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" id="">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h3>Indicateur s</h3>
                            <div id="SPE_reg"> </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
    </div>
</div>
{% endblock %}

{% block js %}
    <!-- global_parameters calendar-->
    <script type="text/javascript">
        $(function() {
            $('input[name="global_parameters"]').daterangepicker({
                "showDropdowns": true,
                "autoApply": true,
                "startDate": {{ start_d_learn_fr|tojson }},
                "endDate": {{ end_d_learn_fr|tojson }},
                "minDate": {{ first_day_fr|tojson }},
                "maxDate": {{ last_day_fr|tojson }},
                "showCustomRangeLabel": true,
                autoUpdateInput: true,
                locale: {   format: 'DD/MM/YYYY', 
                            daysOfWeek: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
                            monthNames: ['Janv', 'Févr', 'Mars', 'Avr', 'Mai', 'Juin',
                                'Juill', 'Août', 'Sept', 'Oct', 'Nov', 'Déc'],
                            firstDay: 1},
            });
        });
    </script>
    <!-- hosp_parameters calendar-->
    <script type="text/javascript">
        $(function() {
            $('input[name="hosp_parameters"]').daterangepicker({
                "showDropdowns": true,
                "autoApply": true,
                "startDate": {{ start_d_learn_fr_reg|tojson }},
                "endDate": {{ end_d_learn_fr_reg|tojson }},
                "minDate": {{ first_day_fr|tojson }},
                "maxDate": {{ last_day_fr|tojson }},   
                "showCustomRangeLabel": true,
                autoUpdateInput: true,
                locale: {   format: 'DD/MM/YYYY', 
                            daysOfWeek: ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'],
                            monthNames: ['Janv', 'Févr', 'Mars', 'Avr', 'Mai', 'Juin',
                                'Juill', 'Août', 'Sept', 'Oct', 'Nov', 'Déc'],
                            firstDay: 1},
            });
        });
    </script>

    <!-- positive map regions-->
    <script type="text/javascript">
        mapDiv = "#positive_map_reg";
        regions = {{ overall_regions_data_P | safe }};
        quantiles = {{ overall_regions_quantiles_P | safe }};
        current_label = "{{ region }}";
        text = "cas positifs";
        feature_par_habitants = "P_par_habitants";
        feature_name = "P";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- death map regions-->
    <script type="text/javascript">
        mapDiv = "#death_map_reg";
        regions = {{ overall_regions_data_dc | safe }};
        quantiles = {{ overall_regions_quantiles_dc | safe }};
        current_label = "{{ region }}";
        text = "décès";
        feature_par_habitants = "dc_par_habitants";
        feature_name = "dc";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- rad map regions-->
    <script type="text/javascript">
        mapDiv = "#rad_map_reg";
        regions = {{ overall_regions_data_rad | safe }};
        quantiles = {{ overall_regions_quantiles_rad | safe }};
        current_label = "{{ region }}";
        text = "guérisons";
        feature_par_habitants = "rad_par_habitants";
        feature_name = "rad";
        colors = ["#FED674", '#F5F50A', '#A4F905', '#06BF06', '#146806'];
        fill_slices = "#FEB653";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- hosp map regions-->
    <script type="text/javascript">
        mapDiv = "#hosp_map_reg";
        regions = {{ overall_regions_data_hosp | safe }};
        quantiles = {{ overall_regions_quantiles_hosp | safe }};
        current_label = "{{ region }}";
        text = "hospitalisations";
        feature_par_habitants = "hosp_par_habitants";
        feature_name = "hosp";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- rea map regions-->
    <script type="text/javascript">
        mapDiv = "#rea_map_reg";
        regions = {{ overall_regions_data_rea | safe }};
        quantiles = {{ overall_regions_quantiles_rea | safe }};
        current_label = "{{ region }}";
        text = "réanimations";
        feature_par_habitants = "rea_par_habitants";
        feature_name = "rea";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
	<!-- rate dc/rad map regions-->
    <script type="text/javascript">
        mapDiv = "#rate_death_map_reg";
        regions = {{ overall_regions_data_r_dc_rad | safe }};
        quantiles = {{ overall_regions_quantiles_r_dc_rad | safe }};
        current_label = "{{ region }}";
        text = null;
        feature_par_habitants = null;
        feature_name = "r_dc_rad";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotRegMap(mapDiv, regions, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>

    <!-- positive map departments-->
    <script type="text/javascript">
        mapDiv = "#positive_map_dep";
        departments = {{ overall_departments_data_P | safe }};
        quantiles = {{ overall_departments_quantiles_P | safe }};
        current_label = "{{ department }}";
        text = "cas positifs";
        feature_par_habitants = "P_par_habitants";
        feature_name = "P";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- death map departments-->
    <script type="text/javascript">
        mapDiv = "#death_map_dep";
        departments = {{ overall_departments_data_dc | safe }};
        quantiles = {{ overall_departments_quantiles_dc | safe }};
        current_label = "{{ department }}";
        text = "décès";
        feature_par_habitants = "dc_par_habitants";
        feature_name = "dc";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- rad map departments-->
    <script type="text/javascript">
        mapDiv = "#rad_map_dep";
        departments = {{ overall_departments_data_rad | safe }};
        quantiles = {{ overall_departments_quantiles_rad | safe }};
        current_label = "{{ department }}";
        text = "guérisons";
        feature_par_habitants = "rad_par_habitants";
        feature_name = "rad";
        colors = ["#FED674", '#F5F50A', '#A4F905', '#06BF06', '#146806'];
        fill_slices = "#FEB653";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- hosp map departments-->
    <script type="text/javascript">
        mapDiv = "#hosp_map_dep";
        departments = {{ overall_departments_data_hosp | safe }};
        quantiles = {{ overall_departments_quantiles_hosp | safe }};
        current_label = "{{ department }}";
        text = "hospitalisations";
        feature_par_habitants = "hosp_par_habitants";
        feature_name = "hosp";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- rea map departments-->
    <script type="text/javascript">
        mapDiv = "#rea_map_dep";
        departments = {{ overall_departments_data_rea | safe }};
        quantiles = {{ overall_departments_quantiles_rea | safe }};
        current_label = "{{ department }}";
        text = "réanimations";
        feature_par_habitants = "rea_par_habitants";
        feature_name = "rea";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>
    <!-- rate dc/rad map departments-->
    <script type="text/javascript">
        mapDiv = "#rate_death_map_dep";
        departments = {{ overall_departments_data_r_dc_rad | safe }};
        quantiles = {{ overall_departments_quantiles_r_dc_rad | safe }};
        current_label = "{{ department }}";
        text = null;
        feature_par_habitants = null;
        feature_name = "r_dc_rad";
        colors = ["#f2f53a", '#df891a', '#e61919', '#680000', '#1d0303'];
        fill_slices = "#D6F77F";
        plotDepMap(mapDiv, departments, quantiles, current_label, text, feature_name, feature_par_habitants, colors, fill_slices);
    </script>

   <!-- impacted dep charts-->
    <script type="text/javascript">
        var graphs = {{ impacted_dep_graphJSON["graphJSON0"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ impacted_dep_graphJSON["graphJSON1"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ impacted_dep_graphJSON["graphJSON2"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ impacted_dep_graphJSON["graphJSON3"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>

    <!-- positive data charts-->
    <script type="text/javascript">
        var graphs = {{ positive_graphJSON["graphJSON0"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>

    <!-- charts rad, dc, rea and hosp -->
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON0"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON1"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON2"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON3"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON4"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ covid_graphJSON["graphJSON5"] | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>

    <!-- charts pca-->
    <script type="text/javascript">
        var graphs = {{ graphJSON_pca_global | safe }};
        var text = "";
        plotGraphs(graphs, text);
    </script>
    <script type="text/javascript">
        var graphs = {{ graphJSON_pca_hosp_reg | safe }};
        var text = "_reg";
        plotGraphs(graphs, text);
    </script>
{% endblock %}